<div class="monForm">
  <section class="subForm saisieForm">
    <h2>Nouveau CD</h2>
    <form [formGroup]="form" (ngSubmit)="onSubmit()">
      <div class="form-group">
        <label for="titre">Titre :</label>
        <input
          id="titre"
          type="text"
          class="form-control"
          formControlName="titre"
        />
        <small
          *ngIf="form.get('titre').invalid &&
                 (form.get('titre').dirty ||
                  form.get('titre').touched)"
          class="text-danger"
        >
          <small *ngIf="form.get('titre').hasError('required')">
            Ce champ est requis.
          </small>
          <small *ngIf="form.get('titre').hasError('minlength')">
            Ce champ doit comporter au moins 6 caractères.
          </small>
        </small>
      </div>

      <div class="form-group">
        <label for="auteur">Auteur / Groupe :</label>
        <input
          id="auteur"
          type="text"
          class="form-control"
          formControlName="auteur"
        />
        <small
          *ngIf="form.get('auteur').invalid &&
                 (form.get('auteur').dirty ||
                  form.get('auteur').touched)"
          class="text-danger"
        >
          <small *ngIf="form.get('auteur').hasError('required')">
            Ce champ est requis.
          </small>
          <small *ngIf="form.get('auteur').hasError('minlength')">
            Ce champ doit comporter au moins 6 caractères.
          </small>
        </small>
      </div>

      <div class="form-group">
        <label for="image">Image (URL) :</label>
        <input
          id="image"
          type="text"
          class="form-control"
          formControlName="image"
        />
        <small
          *ngIf="form.get('image').invalid &&
                 (form.get('image').dirty ||
                  form.get('image').touched)"
          class="text-danger"
        >
          <small *ngIf="form.get('image').hasError('pattern')">
            Veuillez entrer une URL valide.
          </small>
        </small>
      </div>

      <div class="form-group">
        <label for="prix">Prix :</label>
        <input
          id="prix"
          type="number"
          class="form-control"
          formControlName="prix"
        />
        <small
          *ngIf="form.get('prix').invalid &&
                 (form.get('prix').dirty ||
                  form.get('prix').touched)"
          class="text-danger"
        >
          <small *ngIf="form.get('prix').hasError('required')">
            Ce champ est requis.
          </small>
          <small *ngIf="form.get('prix').hasError('min')">
            Le prix doit être supérieur à 0.
          </small>
        </small>
      </div>

      <div class="form-group">
        <label for="quantite">Quantité en stock :</label>
        <input
          id="quantite"
          type="number"
          class="form-control"
          formControlName="quantite"
        />
        <small
          *ngIf="form.get('quantite').invalid &&
                 (form.get('quantite').dirty ||
                  form.get('quantite').touched)"
          class="text-danger"
        >
          <small *ngIf="form.get('quantite').hasError('required')">
            Ce champ est requis.
          </small>
          <small *ngIf="form.get('quantite').hasError('min')">
            La quantité doit être supérieure ou égale à 0.
          </small>
        </small>
      </div>

      <div class="form-group">
        <label for="dateSortie">Date de sortie :</label>
        <input
          id="dateSortie"
          type="date"
          class="form-control"
          formControlName="dateSortie"
        />
        <small
          *ngIf="form.get('dateSortie').invalid &&
                 (form.get('dateSortie').dirty ||
                  form.get('dateSortie').touched)"
          class="text-danger"
        >
          <small *ngIf="form.get('dateSortie').hasError('required')">
            Ce champ est requis.
          </small>
        </small>
      </div>

      <button
        type="submit"
        [disabled]="form.invalid"
      >
        Ajouter le CD
      </button>
    </form>
  </section>

  <section class="subForm visuForm">
    <h2>Vue du CD</h2>
    <div *ngIf="currentCd">
      <h2>Titre : {{ currentCd.titre }}</h2>
      <p>Sortie le : {{(currentCd.dateSortie | date: 'dd/MM/yyyy')}}</p>
      <p>Auteur / groupe : {{(currentCd.auteur)}}</p>
      <p>Prix : {{(currentCd.prix | currency)}}</p>
      <p>Quantité : {{(currentCd.quantite)}}</p>
      <img [src]="currentCd.image" alt="{{(currentCd.titre)}}">
    </div>
  </section>
</div>
